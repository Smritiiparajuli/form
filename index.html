<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dosink - Loyalty Program Setup</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      padding: 20px;
      color: #2c3e50;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 25px 50px rgba(44, 62, 80, 0.15);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
      color: white;
      padding: 50px 40px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="70" r="1.5" fill="rgba(255,255,255,0.1)"/><circle cx="90" cy="80" r="1" fill="rgba(255,255,255,0.1)"/></svg>');
      pointer-events: none;
    }

    .logo-container {
      margin-bottom: 30px;
      position: relative;
      z-index: 1;
    }

    .dosink-logo {
      font-size: 3rem;
      font-weight: 300;
      color: white;
      letter-spacing: -2px;
      margin-bottom: 10px;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    .dosink-logo .dos {
      color: #7f8c8d;
      font-weight: 400;
    }

    .dosink-logo .ink {
      color: white;
      position: relative;
    }

    .dosink-logo .ink::after {
      content: '';
      position: absolute;
      top: -10px;
      right: -5px;
      width: 8px;
      height: 8px;
      background: #3498db;
      border-radius: 50%;
      box-shadow: 0 0 15px rgba(52, 152, 219, 0.6);
    }

    .tagline {
      font-size: 1.1rem;
      opacity: 0.9;
      font-weight: 300;
      position: relative;
      z-index: 1;
    }

    .header h1 {
      font-size: 2.2rem;
      margin-top: 20px;
      margin-bottom: 10px;
      font-weight: 600;
      position: relative;
      z-index: 1;
    }

    .header p {
      font-size: 1.1rem;
      opacity: 0.9;
      position: relative;
      z-index: 1;
    }

    .form-container {
      padding: 50px 40px;
    }

    .section {
      margin-bottom: 50px;
      background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
      border-radius: 15px;
      padding: 35px;
      border: 1px solid rgba(44, 62, 80, 0.08);
      box-shadow: 0 5px 15px rgba(44, 62, 80, 0.05);
      position: relative;
      overflow: hidden;
    }

    .section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 5px;
      height: 100%;
      background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    }

    .section-title {
      font-size: 1.6rem;
      color: #2c3e50;
      margin-bottom: 25px;
      display: flex;
      align-items: center;
      gap: 15px;
      font-weight: 600;
      position: relative;
    }

    .section-title::before {
      content: "‚óè";
      color: #2c3e50;
      font-size: 1.2rem;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 25px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    label {
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 10px;
      font-size: 0.95rem;
      letter-spacing: 0.3px;
    }

    input,
    textarea,
    select {
      padding: 15px 18px;
      border: 2px solid #ecf0f1;
      border-radius: 10px;
      font-size: 1rem;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: white;
      color: #2c3e50;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.1);
      transform: translateY(-2px);
    }

    .color-input {
      height: 55px;
      cursor: pointer;
      border-radius: 10px;
      overflow: hidden;
    }

    .tier-section,
    .spending-type-section,
    .reward-section {
      border: 2px dashed #bdc3c7;
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 25px;
      background: white;
      transition: all 0.3s ease;
      position: relative;
    }

    .tier-section:hover,
    .spending-type-section:hover,
    .reward-section:hover {
      border-color: #3498db;
      box-shadow: 0 5px 15px rgba(52, 152, 219, 0.1);
    }

    .add-button {
      background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: inline-flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 5px 15px rgba(44, 62, 80, 0.3);
    }

    .add-button:hover {
      background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(44, 62, 80, 0.4);
    }

    .remove-button {
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 500;
      margin-top: 15px;
      transition: all 0.3s ease;
    }

    .remove-button:hover {
      background: linear-gradient(135deg, #c0392b 0%, #e74c3c 100%);
      transform: translateY(-2px);
    }

    .submit-container {
      text-align: center;
      padding: 50px 0;
      background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
      border-radius: 15px;
      margin-top: 50px;
      border: 1px solid rgba(44, 62, 80, 0.08);
    }

    .submit-button {
      background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
      color: white;
      border: none;
      padding: 20px 50px;
      border-radius: 15px;
      cursor: pointer;
      font-size: 1.3rem;
      font-weight: 700;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 10px 30px rgba(44, 62, 80, 0.3);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .submit-button:hover {
      background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
      transform: translateY(-4px);
      box-shadow: 0 15px 40px rgba(44, 62, 80, 0.4);
    }

    .required {
      color: #e74c3c;
      font-weight: 700;
    }

    .help-text {
      font-size: 0.85rem;
      color: #7f8c8d;
      margin-top: 8px;
      font-style: italic;
    }

    .preview-box {
      border: 2px solid #ecf0f1;
      border-radius: 12px;
      padding: 15px 20px;
      margin-top: 15px;
      background: white;
      min-height: 60px;
      max-width: 350px;
      margin-left: auto;
      margin-right: auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #7f8c8d;
      transition: all 0.3s ease;
      font-weight: 500;
      text-align: center;
    }

    .footer {
      background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
      color: white;
      text-align: center;
      padding: 30px;
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .footer strong {
      color: #3498db;
    }

    @media (max-width: 768px) {
      .form-grid {
        grid-template-columns: 1fr;
      }

      .dosink-logo {
        font-size: 2.5rem;
      }

      .header h1 {
        font-size: 1.8rem;
      }

      .form-container {
        padding: 30px 20px;
      }

      .section {
        padding: 25px 20px;
      }
    }

    /* Enhanced animations */
    .section {
      animation: slideInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Focus states for accessibility */
    input:focus,
    textarea:focus,
    select:focus,
    button:focus {
      outline: 2px solid #3498db;
      outline-offset: 2px;
    }

    /* Loading state for submit button */
    .submit-button.loading {
      position: relative;
      color: transparent;
    }

    .submit-button.loading::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      top: 50%;
      left: 50%;
      margin-left: -10px;
      margin-top: -10px;
      border: 2px solid transparent;
      border-top-color: white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <div class="logo-container">
        <div class="dosink-logo">
          <span class="dos">Dos</span><span class="ink">Ink</span>
        </div>
        <div class="tagline">Marketing Technology Solutions</div>
      </div>
      <h1>Loyalty Program Setup</h1>
      <p>Configure your comprehensive loyalty platform</p>
    </div>

    <div class="form-container">
      <form id="clientSetupForm">
        <!-- Partner Information -->
        <div class="section">
          <h2 class="section-title">Partner Information</h2>
          <div class="form-grid">
            <div class="form-group">
              <label for="partnerName">Business Name <span class="required">*</span></label>
              <input type="text" id="partnerName" name="partnerName" required placeholder="Your business/brand name">
              <div class="help-text">Your business name as it will appear in the loyalty program</div>
            </div>

            <div class="form-group">
              <label for="cardKey">Card Key <span class="required">*</span></label>
              <input type="text" id="cardKey" name="cardKey" required placeholder="e.g., Brand-Suffix-001">
              <div class="help-text">Unique identifier for your loyalty cards (e.g., Brand-Suffix-001)</div>
            </div>

            <div class="form-group full-width">
              <label for="tagline">Brand Tagline</label>
              <input type="text" id="tagline" name="tagline" placeholder="e.g., Rewarding loyal customers since 2024">
              <div class="help-text">A memorable phrase that represents your brand values</div>
            </div>

            <div class="form-group">
              <label for="website">Website URL <span class="required">*</span></label>
              <input type="url" id="website" name="website" required placeholder="https://example.com">
            </div>

            <div class="form-group">
              <label for="logoFile">Company Logo</label>
              <input type="file" id="logoFile" name="logoFile" accept="image/*">
              <div class="help-text">Upload your company logo (recommended: 200x200px, PNG format)</div>
            </div>


          </div>
        </div>

        <!-- Branding & Styling -->
        <div class="section">
          <h2 class="section-title">Branding & Styling</h2>
          <div class="form-grid">
            <div class="form-group">
              <label>Primary Brand Color</label>
              <input type="color" id="primaryColor" name="primaryColor" class="color-input" value="#2c3e50">
            </div>

            <div class="form-group">
              <label>Secondary Brand Color</label>
              <input type="color" id="secondaryColor" name="secondaryColor" class="color-input" value="#34495e">
            </div>

            <div class="form-group">
              <label>Accent Color</label>
              <input type="color" id="accentColor" name="accentColor" class="color-input" value="#3498db">
            </div>

            <div class="form-group">
              <label>Primary Font Family</label>
              <select id="primaryFont" name="primaryFont">
                <option value="system">System Default</option>
                <option value="Arial, sans-serif">Arial</option>
                <option value="Helvetica, sans-serif">Helvetica</option>
                <option value="Georgia, serif">Georgia</option>
                <option value="Times New Roman, serif">Times New Roman</option>
                <option value="Roboto, sans-serif">Roboto</option>
                <option value="Open Sans, sans-serif">Open Sans</option>
                <option value="Montserrat, sans-serif">Montserrat</option>
              </select>
            </div>

            <div class="form-group">
              <label>Header Font Family</label>
              <select id="headerFont" name="headerFont">
                <option value="inherit">Same as Primary</option>
                <option value="Arial, sans-serif">Arial</option>
                <option value="Helvetica, sans-serif">Helvetica</option>
                <option value="Georgia, serif">Georgia</option>
                <option value="Times New Roman, serif">Times New Roman</option>
                <option value="Roboto, sans-serif">Roboto</option>
                <option value="Open Sans, sans-serif">Open Sans</option>
                <option value="Montserrat, sans-serif">Montserrat</option>
              </select>
            </div>

            <div class="form-group full-width">
              <label>Brand Style Preview</label>
              <div class="preview-box" id="stylePreview">
                Your brand colors and fonts will be previewed here
              </div>
            </div>
          </div>
        </div>

        <!-- Membership Tiers -->
        <div class="section">
          <h2 class="section-title">Membership Tiers</h2>
          <div id="tiersContainer">
            <div class="tier-section">
              <div class="form-grid">
                <div class="form-group">
                  <label>Tier Name <span class="required">*</span></label>
                  <input type="text" name="tierName[]" required placeholder="e.g., Excellence, Pinnacle, Paragon">
                </div>

                <div class="form-group">
                  <label>Base Points Required</label>
                  <input type="number" name="tierBasePoints[]" min="0" placeholder="0">
                </div>

                <div class="form-group">
                  <label>Base Room Nights Required</label>
                  <input type="number" name="tierRoomNights[]" min="0" placeholder="0">
                </div>

                <div class="form-group">
                  <label>Discount Percentage (%)</label>
                  <input type="number" name="tierDiscount[]" min="0" max="100" step="0.1" placeholder="5.0">
                </div>

                <div class="form-group">
                  <label>Primary Color</label>
                  <input type="color" name="tierColorOne[]" class="color-input" value="#2c3e50">
                </div>

                <div class="form-group">
                  <label>Secondary Color</label>
                  <input type="color" name="tierColorTwo[]" class="color-input" value="#34495e">
                </div>

                <div class="form-group">
                  <label>Tier Badge Image URL</label>
                  <input type="url" name="tierImage[]" placeholder="https://example.com/tier-badge.png">
                </div>

                <div class="form-group full-width">
                  <label>Tier Description</label>
                  <textarea name="tierDescription[]" rows="3"
                    placeholder="Benefits and exclusive features of this membership tier"></textarea>
                </div>
              </div>
            </div>
          </div>
          <button type="button" class="add-button" onclick="addTier()" id="addTierButton">
            + Add Another Tier
          </button>
          <div class="help-text" style="margin-top: 10px; text-align: center;">Maximum 4 tiers allowed</div>
        </div>

        <!-- Point Credits -->
        <div class="section">
          <h2 class="section-title">Point Credits</h2>
          <div id="spendingTypesContainer">
            <div class="spending-type-section">
              <div class="form-grid">
                <div class="form-group">
                  <label>Category Name <span class="required">*</span></label>
                  <input type="text" name="spendingTypeName[]" required placeholder="e.g., Dining, Shopping, Services">
                </div>

                <div class="form-group">
                  <label>Currency</label>
                  <select name="spendingTypeCurrency[]">
                    <option value="THB" selected>THB - Thai Baht</option>
                    <option value="USD">USD - US Dollar</option>
                    <option value="EUR">EUR - Euro</option>
                    <option value="GBP">GBP - British Pound</option>
                    <option value="JPY">JPY - Japanese Yen</option>
                    <option value="CAD">CAD - Canadian Dollar</option>
                    <option value="AUD">AUD - Australian Dollar</option>
                    <option value="CHF">CHF - Swiss Franc</option>
                    <option value="CNY">CNY - Chinese Yuan</option>
                    <option value="SEK">SEK - Swedish Krona</option>
                    <option value="NZD">NZD - New Zealand Dollar</option>
                  </select>
                </div>

                <div class="form-group">
                  <label>Points Multiplier</label>
                  <input type="number" name="spendingTypeMultiplier[]" min="0" step="0.1" value="1.0" placeholder="1.0">
                  <div class="help-text">Points earned per currency unit spent (1.0 = 1 point per 1 currency unit)</div>
                </div>
              </div>
            </div>
          </div>
          <button type="button" class="add-button" onclick="addSpendingType()">
            + Add Point Credit Category
          </button>
        </div>

        <!-- Reward Categories -->
        <div class="section">
          <h2 class="section-title">Reward Categories</h2>
          <div id="rewardCategoriesContainer">
            <div class="reward-section">
              <div class="form-grid">
                <div class="form-group">
                  <label>Category Name <span class="required">*</span></label>
                  <input type="text" name="rewardCategoryName[]" required
                    placeholder="e.g., Discounts, Free Items, Experiences" onchange="updateRewardCategorySelects()">
                </div>

                <div class="form-group full-width">
                  <label>Category Description</label>
                  <textarea name="rewardCategoryDescription[]" rows="2"
                    placeholder="Description of this reward category and its benefits"></textarea>
                </div>
              </div>
            </div>
          </div>
          <button type="button" class="add-button" onclick="addRewardCategory()">
            + Add Reward Category
          </button>
        </div>

        <!-- Rewards & Benefits -->
        <div class="section">
          <h2 class="section-title">Rewards & Benefits</h2>
          <div id="rewardsContainer">
            <div class="reward-section">
              <div class="form-grid">
                <div class="form-group">
                  <label>Reward Name <span class="required">*</span></label>
                  <input type="text" name="rewardName[]" required placeholder="e.g., 10% Off Next Purchase">
                </div>

                <div class="form-group">
                  <label>Points Required</label>
                  <input type="number" name="rewardPoints[]" min="1" placeholder="100">
                </div>

                <div class="form-group">
                  <label>Reward Category</label>
                  <select name="rewardCategory[]" class="reward-category-select">
                    <option value="">Select Category</option>
                  </select>
                  <div class="help-text">Add reward categories above first</div>
                </div>
              </div>
            </div>
          </div>
          <button type="button" class="add-button" onclick="addReward()">
            + Add Sample Reward
          </button>
        </div>

        <!-- Submit Button -->
        <div class="submit-container">
          <button type="submit" class="submit-button">
            Create Loyalty Program
          </button>
          <div style="margin-top: 20px; color: #7f8c8d; font-size: 0.9rem;">
            Complete setup will be processed within 24 hours
          </div>
        </div>
      </form>
    </div>

    <div class="footer">
      Powered by <strong>Dosink Co., Ltd</strong> - Marketing Technology Solutions
    </div>
  </div>

  <script>
    let tierCount = 1;
    let spendingTypeCount = 1;
    let rewardCategoryCount = 1;
    let rewardCount = 1;

    function addTier() {
      if (tierCount >= 4) {
        alert('Maximum 4 tiers allowed');
        return;
      }
      
      tierCount++;
      const container = document.getElementById("tiersContainer");
      const tierHtml = `
          <div class="tier-section">
            <div class="form-grid">
              <div class="form-group">
                <label>Tier Name <span class="required">*</span></label>
                <input type="text" name="tierName[]" required placeholder="e.g., Excellence, Pinnacle, Paragon">
              </div>
              
              <div class="form-group">
                <label>Base Points Required</label>
                <input type="number" name="tierBasePoints[]" min="0" placeholder="0">
              </div>
              
              <div class="form-group">
                <label>Base Room Nights Required</label>
                <input type="number" name="tierRoomNights[]" min="0" placeholder="0">
              </div>
              
              <div class="form-group">
                <label>Discount Percentage (%)</label>
                <input type="number" name="tierDiscount[]" min="0" max="100" step="0.1" placeholder="5.0">
              </div>
              
              <div class="form-group">
                <label>Primary Color</label>
                <input type="color" name="tierColorOne[]" class="color-input" value="#2c3e50">
              </div>
              
              <div class="form-group">
                <label>Secondary Color</label>
                <input type="color" name="tierColorTwo[]" class="color-input" value="#34495e">
              </div>
              
              <div class="form-group">
                <label>Tier Badge Image URL</label>
                <input type="url" name="tierImage[]" placeholder="https://example.com/tier-badge.png">
              </div>
              
              <div class="form-group full-width">
                <label>Tier Description</label>
                <textarea name="tierDescription[]" rows="3" placeholder="Benefits and exclusive features of this membership tier"></textarea>
              </div>
            </div>
            <button type="button" class="remove-button" onclick="removeTier(this)">Remove Tier</button>
          </div>
        `;
      container.insertAdjacentHTML("beforeend", tierHtml);
      updateTierButton();
    }

    function removeTier(button) {
      if (tierCount > 1) {
        button.closest(".tier-section").remove();
        tierCount--;
        updateTierButton();
      }
    }

    function updateTierButton() {
      const addButton = document.getElementById('addTierButton');
      if (tierCount >= 4) {
        addButton.style.display = 'none';
      } else {
        addButton.style.display = 'inline-flex';
      }
    }

    function addSpendingType() {
      spendingTypeCount++;
      const container = document.getElementById("spendingTypesContainer");
      const spendingTypeHtml = `
          <div class="spending-type-section">
            <div class="form-grid">
              <div class="form-group">
                <label>Category Name <span class="required">*</span></label>
                <input type="text" name="spendingTypeName[]" required placeholder="e.g., Dining, Shopping, Services">
              </div>
              
              <div class="form-group">
                <label>Currency</label>
                <select name="spendingTypeCurrency[]">
                  <option value="THB" selected>THB - Thai Baht</option>
                  <option value="USD">USD - US Dollar</option>
                  <option value="EUR">EUR - Euro</option>
                  <option value="GBP">GBP - British Pound</option>
                  <option value="JPY">JPY - Japanese Yen</option>
                  <option value="CAD">CAD - Canadian Dollar</option>
                  <option value="AUD">AUD - Australian Dollar</option>
                  <option value="CHF">CHF - Swiss Franc</option>
                  <option value="CNY">CNY - Chinese Yuan</option>
                  <option value="SEK">SEK - Swedish Krona</option>
                  <option value="NZD">NZD - New Zealand Dollar</option>
                </select>
              </div>
              
              <div class="form-group">
                <label>Points Multiplier</label>
                <input type="number" name="spendingTypeMultiplier[]" min="0" step="0.1" value="1.0" placeholder="1.0">
                <div class="help-text">Points earned per currency unit spent (1.0 = 1 point per 1 currency unit)</div>
              </div>
            </div>
            <button type="button" class="remove-button" onclick="removeSpendingType(this)">Remove Category</button>
          </div>
        `;
      container.insertAdjacentHTML("beforeend", spendingTypeHtml);
    }

    function removeSpendingType(button) {
      if (spendingTypeCount > 1) {
        button.closest(".spending-type-section").remove();
        spendingTypeCount--;
      }
    }

    function addRewardCategory() {
      rewardCategoryCount++;
      const container = document.getElementById("rewardCategoriesContainer");
      const categoryHtml = `
          <div class="reward-section">
            <div class="form-grid">
              <div class="form-group">
                <label>Category Name <span class="required">*</span></label>
                <input type="text" name="rewardCategoryName[]" required placeholder="e.g., Discounts, Free Items, Experiences" onchange="updateRewardCategorySelects()">
              </div>
              
              <div class="form-group full-width">
                <label>Category Description</label>
                <textarea name="rewardCategoryDescription[]" rows="2" placeholder="Description of this reward category and its benefits"></textarea>
              </div>
            </div>
            <button type="button" class="remove-button" onclick="removeRewardCategory(this)">Remove Category</button>
          </div>
        `;
      container.insertAdjacentHTML("beforeend", categoryHtml);
      updateRewardCategorySelects();
    }

    function removeRewardCategory(button) {
      if (rewardCategoryCount > 1) {
        button.closest(".reward-section").remove();
        rewardCategoryCount--;
        updateRewardCategorySelects();
      }
    }

    function addReward() {
      rewardCount++;
      const container = document.getElementById("rewardsContainer");
      const rewardHtml = `
          <div class="reward-section">
            <div class="form-grid">
              <div class="form-group">
                <label>Reward Name <span class="required">*</span></label>
                <input type="text" name="rewardName[]" required placeholder="e.g., 10% Off Next Purchase">
              </div>
              
              <div class="form-group">
                <label>Points Required</label>
                <input type="number" name="rewardPoints[]" min="1" placeholder="100">
              </div>
              
              <div class="form-group">
                <label>Reward Category</label>
                <select name="rewardCategory[]" class="reward-category-select">
                  <option value="">Select Category</option>
                </select>
                <div class="help-text">Add reward categories above first</div>
              </div>
            </div>
            <button type="button" class="remove-button" onclick="removeReward(this)">Remove Reward</button>
          </div>
        `;
      container.insertAdjacentHTML("beforeend", rewardHtml);
      updateRewardCategorySelects();
    }

    function removeReward(button) {
      if (rewardCount > 1) {
        button.closest(".reward-section").remove();
        rewardCount--;
      }
    }

    function updateRewardCategorySelects() {
      const categoryInputs = document.querySelectorAll('input[name="rewardCategoryName[]"]');
      const selects = document.querySelectorAll('.reward-category-select');

      selects.forEach(select => {
        const currentValue = select.value;
        select.innerHTML = '<option value="">Select Category</option>';

        categoryInputs.forEach(input => {
          if (input.value.trim()) {
            const option = document.createElement('option');
            option.value = input.value.trim();
            option.textContent = input.value.trim();
            if (option.value === currentValue) {
              option.selected = true;
            }
            select.appendChild(option);
          }
        });
      });
    }

    function updateStylePreview() {
      const primaryColor = document.getElementById('primaryColor').value;
      const secondaryColor = document.getElementById('secondaryColor').value;
      const accentColor = document.getElementById('accentColor').value;
      const primaryFont = document.getElementById('primaryFont').value;
      const headerFont = document.getElementById('headerFont').value;

      const preview = document.getElementById('stylePreview');
      preview.style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`;
      preview.style.color = 'white';
      preview.style.fontFamily = primaryFont === 'system' ? 'inherit' : primaryFont;
      preview.innerHTML = `
          <div style="font-family: ${headerFont === 'inherit' ? (primaryFont === 'system' ? 'inherit' : primaryFont) : headerFont}; font-size: 1.1rem; font-weight: bold; margin-bottom: 8px;">Your Brand Header</div>
          <div style="font-size: 0.9rem;">Body text with <span style="color: ${accentColor}; font-weight: bold;">accent</span></div>
        `;
    }

    // Event listeners for real-time preview updates
    document.addEventListener('DOMContentLoaded', function () {
      const colorInputs = ['primaryColor', 'secondaryColor', 'accentColor'];
      const fontSelects = ['primaryFont', 'headerFont'];

      colorInputs.forEach(id => {
        document.getElementById(id).addEventListener('input', updateStylePreview);
      });

      fontSelects.forEach(id => {
        document.getElementById(id).addEventListener('change', updateStylePreview);
      });

      // Initialize preview
      updateStylePreview();

      // Add event listeners to existing reward category inputs
      document.querySelectorAll('input[name="rewardCategoryName[]"]').forEach(input => {
        input.addEventListener('input', updateRewardCategorySelects);
      });
    });

    // Form submission handler
    document.getElementById('clientSetupForm').addEventListener('submit', async function (e) {
      e.preventDefault();

      const submitButton = document.querySelector('.submit-button');
      submitButton.classList.add('loading');
      submitButton.disabled = true;

      try {
        // Collect all form data
        const formData = new FormData(this);

        console.log('=== SUBMITTING LOYALTY PROGRAM FORM ===');
        console.log('Sending data to server...');

        // Submit form to server
        const response = await fetch('/submit-loyalty-program', {
          method: 'POST',
          body: formData
        });

        const result = await response.json();

        if (result.success) {
          alert('‚úÖ ' + result.message + '\n\nSubmission ID: ' + result.submissionId);
          console.log('‚úÖ Form submitted successfully!');
          console.log('Submission ID:', result.submissionId);

          // Optionally reset the form
          // this.reset();
        } else {
          throw new Error(result.message || 'Unknown error occurred');
        }

      } catch (error) {
        console.error('‚ùå Error submitting form:', error);
        alert('‚ùå Error submitting form: ' + error.message + '\n\nPlease try again or contact support.');
      } finally {
        submitButton.classList.remove('loading');
        submitButton.disabled = false;
      }
    });
  </script>
</body>

</html>